<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>实现compose</title>
</head>
<body>
<p>
    reduceRight() 方法的功能和 reduce() 功能是一样的，不同的是 reduceRight() 从数组的末尾向前将数组中的数组项做累加。
</p>
<script>
  // 同步方法实现 不支持promise 异步async/await
  function compose(...fns) {
    return (...args) => fns.reduceRight((acc, cur) => cur(acc), ...args)
  }

  function a(msg) {
    return msg + "a"
  }

  function b(msg) {
    return msg + "b"
  }

  function c(msg) {
    // await timeOut()
    return msg + "c"
  }

  function timeOut() {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve(true)
      }, 5000)
    })
  }

  const f = compose(a, b, c)

  console.log(f("hello"))
</script>
</body>
</html>